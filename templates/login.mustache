{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template theme_ufpel/login

    Login page template for UFPel theme.
    
    This template should be used ONLY when called from a proper layout file
    that has already called $OUTPUT->doctype()

    Context variables required for this template:
    * sitename - The site name
    * output - The output renderer
    * logourl - URL for the logo (optional)
    * hasloginbackgroundimage - Whether there's a background image
    * loginbackgroundimage - URL of the background image
    * homeurl - URL to home page
    * forgotpasswordurl - URL to forgot password page
    * cansignup - Whether signup is enabled
    * signupurl - URL to signup page (if cansignup is true)
    * haslogininfo - Whether to show login info links
}}
<div id="page-wrapper">
    {{{ output.standard_top_of_body_html }}}

    <div id="page" class="container-fluid d-flex align-items-center justify-content-center min-vh-100">
        <div class="row justify-content-center w-100">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card login-container shadow">
                    <div class="card-body p-4">
                        {{#logourl}}
                        <div class="text-center mb-4">
                            <img src="{{{logourl}}}" class="img-fluid" alt="{{{ sitename }}}" style="max-height: 80px;">
                        </div>
                        {{/logourl}}
                        {{^logourl}}
                        <h2 class="text-center mb-4 text-primary">{{{ sitename }}}</h2>
                        {{/logourl}}
                        
                        <div id="region-main">
                            {{{ output.course_content_header }}}
                            {{{ output.main_content }}}
                            {{{ output.course_content_footer }}}
                        </div>
                    </div>
                </div>
                
                {{#haslogininfo}}
                <div class="mt-3 text-center small">
                    <a href="{{{homeurl}}}" class="text-muted">{{#str}}home{{/str}}</a>
                    {{#cansignup}}
                    <span class="text-muted mx-1">|</span>
                    <a href="{{{signupurl}}}" class="text-muted">{{#str}}startsignup{{/str}}</a>
                    {{/cansignup}}
                    <span class="text-muted mx-1">|</span>
                    <a href="{{{forgotpasswordurl}}}" class="text-muted">{{#str}}forgotten{{/str}}</a>
                </div>
                {{/haslogininfo}}
            </div>
        </div>
    </div>

    <footer id="page-footer" class="py-3 bg-transparent">
        {{{ output.standard_footer_html }}}
    </footer>
</div>

{{#hasloginbackgroundimage}}
<style>
    body.pagelayout-login {
        background-image: url('{{{loginbackgroundimage}}}');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        min-height: 100vh;
    }
    .login-container {
        background: rgba(255, 255, 255, 0.97);
        border: none;
        border-radius: 0.5rem;
    }
    .text-muted {
        color: rgba(255, 255, 255, 0.9) !important;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
    .text-muted:hover {
        color: white !important;
    }
</style>
{{/hasloginbackgroundimage}}

{{^hasloginbackgroundimage}}
<style>
    body.pagelayout-login {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
    }
    .login-container {
        background: white;
        border: none;
        border-radius: 0.5rem;
    }
</style>
{{/hasloginbackgroundimage}}

{{{ output.standard_end_of_body_html }}}